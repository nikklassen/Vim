snippet getopts
while getopts '$1' ${2:flag} ; do
	case "$$2" in
		$3)	$4="$OPTARG";;
		[?])
			print >&2 "Usage: \$0 $5"
			exit 1;;
	esac
done
shift $(($OPTIND-1))
endsnippet

